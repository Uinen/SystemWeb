@using SystemWeb.Models

@model UserIndexViewModel

@{
    Layout = "~/Views/Shared/_SecondLayout.cshtml";
}

@if (Request.IsAuthenticated)
{
    <div class="row">
        @if (User.IsInRole("Administrator"))
        {
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                <li class="breadcrumb-item active">@ViewBag.Flag - @ViewBag.PvNamee, @ViewBag.PvCity - @ViewBag.PvInd</li>
                <li class="breadcrumb-item alert alert-info">Il sistema ha rilevato che la tua utenza appartiene al Ruolo Amministratori, al seguente <a href="/admin">Link</a> puoi accedere ai servizi avanzati al momento disponibili.</li> 
            </ol>
        }
        else
        {
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                <li class="breadcrumb-item active">@ViewBag.Flag - @ViewBag.PvNamee, @ViewBag.PvCity - @ViewBag.PvInd</li>
            </ol>
        }
    </div>
    <div class="row">
        @if (Model.usersimage.Any(f => f.FileType == FileType.Avatar))
        {
            <div class="col-sm-6 col-lg-3 mb-4">
                <div class="card card-header card-success">
                    <div class="card-block">
                        <img src="~/UsersImage?id=@Model.usersimage.First(f => f.FileType == FileType.Avatar).UsersImageID" alt="avatar" style="width:140px; height:140px" />
                        <p class="text-uppercase"><strong> @ViewBag.ProfileFullName </strong></p>
                        <p class="text-lowercase text-capitalize">@ViewBag.FullAdress</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-lg-5 mb-4">
                <div class="card card-inverse card-success o-hidden h-100">
                    <div class="card-block">
                        <div class="card-header">
                            <p class="text-info text-uppercase"><strong>Statistiche di vendita - anno corrente</strong></p>
                        </div>
                        <div class="mb-4">
                            <p>
                                Sono stati venduti @ViewBag.SSPBTotalAmount lt di <strong>Benzina Super Senza Piombo</strong> e
                                @ViewBag.DieselTotalAmount di <strong>Diesel</strong> per un totale di <strong> @ViewBag.TotalAmount </strong> lt venduti
                            </p>
                        </div>
                        <div class="card-header">
                            <p class="text-info text-uppercase"><strong>Obiettivo di vendita</strong></p>
                        </div>
                        <div class="mb-4">
                            <p>Il punto vendita ha venduto <strong> @ViewBag.TotalAmountDifference </strong> lt rispetto al anno precedente</p>
                        </div>
                    </div>
                    <a href="#" class="card-footer clearfix small z-1">
                        <span class="float-left">Esporta</span>
                        <span class="float-right"><i class="fa fa-angle-right"></i></span>
                    </a>
                </div>
            </div>
            <div class="col-sm-4 col-lg-3 mb-4">
                <div class="card card-header card-success">
                    <div class="card-block">
                        <div class="card-header">
                            <p class="text-danger text-uppercase"><strong>Ultime notizie</strong></p>
                        </div>
                        <div class="mb-3">
                            <p>Feed</p>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="row">
        <div class="grid-filter">
            <div class="col-sm-6 col-lg-12 mb-3">
                <div class="card card-inverse card-danger o-hidden h-100">
                    <div class="card-header">
                        <i class="fa fa-area-chart"></i> Diagramma Ordini
                    </div>
                    <div class="card-block">
                        @Html.Partial("CaricoChart")
                    </div>
                    <div class="card-footer small text-muted">

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 mb-3">
            <div class="card card-inverse card-info o-hidden h-100">
                <div class="card-block">
                    <div class="card-block-icon">
                        <i class="fa fa-fw fa-send"></i>
                    </div>
                    <div class="card-header">
                        <i class="fa fa-file-text"></i> Invia Ordine
                    </div>
                    @Html.Partial("CaricoCreate", new SystemWeb.Models.Carico { })
                </div>
            </div>
        </div>
    </div>
}
